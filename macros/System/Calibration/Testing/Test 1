M98 P"0:/sys/led/statusoff.g"
M98 P"0:/sys/led/restorewhite.g"

; Prompt user to enter password
M291 S7 J1 R"Enter Password" P"Enter the password to start the test."
var pp = {input}

; Check if the entered password is correct
if var.pp != "vmawt"
	abort "Error: Incorrect password entered."
	M99

; Check voltage for both boards
if boards[0].vIn.current < 23.5 || boards[0].vIn.current > 24.5
	M98 P"0:/sys/led/fault.g"
	abort "Board 0 voltage out of range: " ^ boards[0].vIn.current ^ "V"
	M99

if boards[1].vIn.current < 23.5 || boards[1].vIn.current > 24.5
	M98 P"0:/sys/led/fault.g"
	abort "Board 1 voltage out of range: " ^ boards[1].vIn.current ^ "V"
	M99

; LED Test
M98 P"0:/macros/System/Calibration/Testing/Tests/LED"

; Fans & Heaters Test
M98 P"0:/macros/System/Calibration/Testing/Tests/Fans & Heaters"

; Endstop Test
M98 P"0:/macros/System/Calibration/Testing/Tests/Endstop"

; XYE - Motor Direction & Connection Test
M98 P"0:/macros/System/Calibration/Testing/Tests/Motor Direction"

; Z - Motor Connection Test
M98 P"0:/macros/System/Calibration/Testing/Tests/Z - Connection"

; Z - Binding Test
M98 P"0:/macros/System/Calibration/Testing/Tests/Z - Binding"

; Homing Test
M98 P"0:/macros/System/Calibration/Testing/Tests/Homing"

; Probes Test
M98 P"0:/macros/System/Calibration/Testing/Tests/Probes"